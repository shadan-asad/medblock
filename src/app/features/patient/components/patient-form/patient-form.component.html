<div class="card shadow-sm mt-4 mb-4" style="background: linear-gradient(135deg, #f8fafc 60%, #e3f0ff 100%);">
  <div class="card-body">
    <h3 class="card-title mb-4">Register New Patient</h3>
    <form [formGroup]="patientForm" (ngSubmit)="onSubmit()" novalidate>
      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="firstName" class="form-label">First Name *</label>
          <input id="firstName" type="text" class="form-control" formControlName="firstName" 
                 [ngClass]="{'is-invalid': f['firstName'].touched && f['firstName'].invalid}">
          <div class="invalid-feedback" *ngIf="f['firstName'].touched && f['firstName'].errors">
            <span *ngIf="f['firstName'].errors['required']">First name is required.</span>
            <span *ngIf="f['firstName'].errors['minlength']">First name must be at least 2 characters.</span>
            <span *ngIf="f['firstName'].errors['maxlength']">First name cannot exceed 50 characters.</span>
            <span *ngIf="f['firstName'].errors['specialCharacters']">First name cannot contain special characters.</span>
            <span *ngIf="f['firstName'].errors['numbersNotAllowed']">First name cannot contain numbers.</span>
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <label for="lastName" class="form-label">Last Name *</label>
          <input id="lastName" type="text" class="form-control" formControlName="lastName" 
                 [ngClass]="{'is-invalid': f['lastName'].touched && f['lastName'].invalid}">
          <div class="invalid-feedback" *ngIf="f['lastName'].touched && f['lastName'].errors">
            <span *ngIf="f['lastName'].errors['required']">Last name is required.</span>
            <span *ngIf="f['lastName'].errors['minlength']">Last name must be at least 2 characters.</span>
            <span *ngIf="f['lastName'].errors['maxlength']">Last name cannot exceed 50 characters.</span>
            <span *ngIf="f['lastName'].errors['specialCharacters']">Last name cannot contain special characters.</span>
            <span *ngIf="f['lastName'].errors['numbersNotAllowed']">Last name cannot contain numbers.</span>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="dateOfBirth" class="form-label">Date of Birth *</label>
          <input id="dateOfBirth" type="date" class="form-control" formControlName="dateOfBirth" 
                 [ngClass]="{'is-invalid': f['dateOfBirth'].touched && f['dateOfBirth'].invalid}">
          <div class="invalid-feedback" *ngIf="f['dateOfBirth'].touched && f['dateOfBirth'].errors">
            <span *ngIf="f['dateOfBirth'].errors['required']">Date of birth is required.</span>
            <span *ngIf="f['dateOfBirth'].errors['futureDate']">Date of birth cannot be in the future.</span>
            <span *ngIf="f['dateOfBirth'].errors['tooOld']">Date of birth seems invalid (patient would be over 120 years old).</span>
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <label for="email" class="form-label">Email *</label>
          <input id="email" type="email" class="form-control" formControlName="email" 
                 [ngClass]="{'is-invalid': f['email'].touched && f['email'].invalid}">
          <div class="invalid-feedback" *ngIf="f['email'].touched && f['email'].errors">
            <span *ngIf="f['email'].errors['required']">Email is required.</span>
            <span *ngIf="f['email'].errors['email']">Please enter a valid email address.</span>
            <span *ngIf="f['email'].errors['maxlength']">Email cannot exceed 100 characters.</span>
            <span *ngIf="f['email'].errors['invalidEmailFormat']">Please enter a valid email format (e.g., john.doe&#64;example.com).</span>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="phone" class="form-label">Phone *</label>
          <input id="phone" type="tel" class="form-control" formControlName="phone" 
                 placeholder="Enter 10-digit phone number"
                 [ngClass]="{'is-invalid': f['phone'].touched && f['phone'].invalid}">
          <div class="invalid-feedback" *ngIf="f['phone'].touched && f['phone'].errors">
            <span *ngIf="f['phone'].errors['required']">Phone number is required.</span>
            <span *ngIf="f['phone'].errors['pattern']">Please enter a valid 10-digit phone number.</span>
            <span *ngIf="f['phone'].errors['invalidPhoneLength']">Phone number must be exactly 10 digits.</span>
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <label for="address" class="form-label">Address *</label>
          <input id="address" type="text" class="form-control" formControlName="address" 
                 [ngClass]="{'is-invalid': f['address'].touched && f['address'].invalid}">
          <div class="invalid-feedback" *ngIf="f['address'].touched && f['address'].errors">
            <span *ngIf="f['address'].errors['required']">Address is required.</span>
            <span *ngIf="f['address'].errors['minlength']">Address must be at least 5 characters.</span>
            <span *ngIf="f['address'].errors['maxlength']">Address cannot exceed 200 characters.</span>
          </div>
        </div>
      </div>
      <div class="mb-3">
        <label for="medicalHistory" class="form-label">Medical History</label>
        <textarea id="medicalHistory" class="form-control" formControlName="medicalHistory" rows="3"
                  [ngClass]="{'is-invalid': f['medicalHistory'].touched && f['medicalHistory'].invalid}"></textarea>
        <div class="invalid-feedback" *ngIf="f['medicalHistory'].touched && f['medicalHistory'].errors">
          <span *ngIf="f['medicalHistory'].errors['maxlength']">Medical history cannot exceed 1000 characters.</span>
        </div>
      </div>
      <div class="mb-3">
        <button type="submit" class="btn btn-primary" [disabled]="loading">
          <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
          Register Patient
        </button>
      </div>
      <div *ngIf="successMsg" class="alert alert-success">{{ successMsg }}</div>
      <div *ngIf="errorMsg" class="alert alert-danger">{{ errorMsg }}</div>
    </form>
  </div>
</div>
